const COMMON_BLOCK = `
공통 블록:
출력 형식:
- 총 6개 단락, 단락 사이에는 빈 줄 1개.
- 번호/제목/불릿/머리글 금지(예: '1단락:' 같은 표기 금지).
- 메타 코멘트 및 지시문 반복 금지, 최종 결과만 출력.
- 글자 수: 1150~1250자.

단어 사용:
- 제공된 5개 단어는 모두 사용하며, 등장 순서는 매번 랜덤이다.
- 각 단락에 최소 1개 단어 포함. 동일 단어의 재등장 허용.

공통 품질 규칙:
- 서사 흐름 외에 해설/평론/설명 금지.
- 금칙어(메타 감정어) 직접 사용 금지: 감정, 기분, 느낌, 슬픔, 외로움, 결핍, 공허, 불안, 위로, 행복, 사랑, 미움, 조용함, 고요함, 혼란 등과 유사어. 반드시 사물·행동·감각으로 우회 표현.
`;

export const prompts = {
  byungmat: `[병맛 반전스토리 작법 가이드]
다음 5개 단어를 사용하라: {단어1}, {단어2}, {단어3}, {단어4}, {단어5}

목표:
- 황당한 사건이지만, 묘사와 전개는 끝까지 진지하게.
- 논리적인 서사 속에 비논리적인 사건 삽입.
- 결말 직전 반전으로 웃음 유발.
- 존재할 것 같지만 실제로는 없는 인물·지명·사건·물건을 1개 이상 삽입.
- 잘못된 사실을 다큐처럼 설명하며, 인물은 비논리를 인식하지 못함.

구조 (총 1200자, 6단락):
(1) 평범하고 진지한 상황 시작. {단어1}
(2) 사소한 사건 전개. {단어2}
(3) 사건이 복잡해짐. {단어3}
(4) 중대한 위기 또는 절정 직전 상황. {단어4}
(5) 황당한 반전 발생. {단어5}, 초반 단어 중 1개 재활용
(6) 반전 이후 짧은 결과 묘사, 결말은 독자 상상에 맡김

문체 규칙(병맛):
- 전개는 다큐처럼 진지하게, 반전은 결말 직전(5~6단락 사이)에서 발생.
- '존재할 것 같지만 없는 것' 1개 이상 삽입하되 사실처럼 서술. 자기서사 깨기 금지.
${COMMON_BLOCK}`,

  msr: `[문수림 미학1: 정서적 미립자 확산형 감정묘사]
다음 5개 단어를 사용하라: {단어1}, {단어2}, {단어3}, {단어4}, {단어5}

목표:
- 감정의 이름은 절대 밝히지 않는다.
- 감정의 온도는 낮고, 표면은 고요하나 속은 미세하게 흔들린다.
- 장면에는 반드시 중요한 결핍이 있다. 인물은 이를 자각하지 못한다.
- 단어는 감정의 매개체로 사용하며, 의미를 변형하거나 맥락을 확장한다.

구조 (총 1200자, 6단락):
(1) 인물의 행동이 멈춘 순간. {단어1}
(2) 주변 사물·환경의 정적. {단어2}
(3) 시간의 흐름을 암시하는 사소한 변화. {단어3}
(4) 빛·소리·온도 중 하나로 외부 자극 표현. {단어4}
(5) 인물이 무의식적으로 반응. {단어5}
(6) 감정의 이름 없이 여운만 남기는 한 줄

문체 규칙(문수림):
- 형용사 최소화, 사물의 상태·빛·소리·온도·질감·시간 흐름으로 감정을 우회 표현.
- 문장 길이 배합: 짧은 문장(10~15자) 30% 이상 포함.
- 마지막 문장은 감정 명칭 없이 잔상(빈 칸, 남은 물방울, 꺼진 표시등 등)으로 끝낸다.

[문수림(msr) 스타일 제약]
- 선택된 단어 5개 중 최소 3개는 본문에 **물리적 오브젝트**로 등장시킬 것.
- 아래 5-비트 구조는 6단락 전체에 분산해 구현하되, 전체 글자 수는 1150~1250자로 유지.
  1) 정지 암시: 주변 사물로 '멈춤' 암시 (형용사 최소화)
  2) 공간화: 2~3문장, 감각(소리/촉감/온도) 2개 이상 의무
  3) 무의식 반응: 인물의 **미세행동 1개**(예: 라벨을 뜯었다/의자를 밀었다)
  4) 외부 자극 1개(소음/빛/냄새)로 카메라 흔들림처럼 전환
  5) 여운: “아무도 그걸 말하지 않았지만/굳이 확인하지 않았다” 류의 비유 1문장으로 닫기
- 금지어(요약감정): '공허함/무기력/허무/외로움'은 직접 쓰지 말고 **사물/행위로 우회**.
- 인칭 지시어 반복('그는')은 문단당 2회 이하. 지시어 없이 동작으로 주어 생략 허용.
- 문장 리듬: 4~10자 단문 1개, 15~25자 평문 2개, 30자 내외 장문 1개를 **한 묶음**으로 반복.
${COMMON_BLOCK}`,

  king: `[스티븐 킹 스타일 스릴러]
다음 5개 단어를 사용하라: {단어1}, {단어2}, {단어3}, {단어4}, {단어5}

목표:
- 평범한 일상 속에 서서히 스며드는 불안감.
- 감각(소리, 냄새, 빛, 온도)과 환경 묘사로 압박감 형성.
- 불안 요소는 명확하게 설명하지 않는다.
- 결말은 모호하게 남겨 여운과 불안을 심는다.

구조 (총 1200자, 6단락):
(1) 안정된 시작. 평범한 환경·날씨 묘사. {단어1}
(2) 사소한 이상 신호 1개 등장. {단어2}
(3) 이상 신호 2~3개 추가. 감각 묘사 강화. {단어3}
(4) 불안의 원인이 나타나거나 암시됨. {단어4}
(5) 불안이 최고조에 달함. {단어5}
(6) 위협이 사라졌는지 모호하게 종료. 마지막 문장은 여운

문체 규칙(스릴러):
- 대사 최소화, 심리·환경 중심. 불안의 정체는 끝까지 설명하지 않는다.
- 소리/냄새/온도/빛의 변화를 누적시키되, 해설 금지. 장면만 보여준다.
${COMMON_BLOCK}`,

  ephron: `[노라 에프런 스타일 로맨틱 코미디]
다음 5개 단어를 사용하라: {단어1}, {단어2}, {단어3}, {단어4}, {단어5}

목표:
- 경쾌하고 따뜻한 톤의 로맨틱 코미디.
- 오해·우연·해프닝을 사건의 기점으로 사용.
- 센스 있는 대사와 속마음 독백.
- 결말은 해소 없이 감정적 클라이맥스에서 암시로 마무리.

구조 (총 1200자, 6단락):
(1) 가벼운 도입, 일상적 상황. {단어1}
(2) 사소한 사건 발생. {단어2}, 짧은 대사·독백 포함
(3) 사건 확대, 상대 등장, 유쾌한 신경전. {단어3}
(4) 분위기 전환, 호감의 조짐. {단어4}
(5) 감정적 클라이맥스. {단어5}
(6) 결말은 주지 않고, 다음을 암시하는 한 줄

문체 규칙(로코):
- 대사·내적 독백 40% 이상. 경쾌한 리듬.
- 감정적 클라이맥스에서 멈추고 결말은 암시로만 남긴다(해피엔딩 확정 문장 금지).
${COMMON_BLOCK}`,
};

export function buildPrompt(style: keyof typeof prompts, words: string[]) {
  const [w1, w2, w3, w4, w5] = words;
  return prompts[style]
    .replaceAll("{단어1}", w1)
    .replaceAll("{단어2}", w2)
    .replaceAll("{단어3}", w3)
    .replaceAll("{단어4}", w4)
    .replaceAll("{단어5}", w5);
}
